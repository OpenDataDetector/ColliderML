import{_ as i,c as a,S as e,o as t}from"./chunks/framework.BKWZoghX.js";const c=JSON.parse('{"title":"Exploding: Event Tables → Flat Tables","description":"","frontmatter":{},"headers":[],"relativePath":"library/exploding.md","filePath":"library/exploding.md","lastUpdated":1770918389000}'),l={name:"library/exploding.md"};function n(p,s,h,r,o,k){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="exploding-event-tables-→-flat-tables" tabindex="-1">Exploding: Event Tables → Flat Tables <a class="header-anchor" href="#exploding-event-tables-→-flat-tables" aria-label="Permalink to &quot;Exploding: Event Tables → Flat Tables&quot;">​</a></h1><p>ColliderML stores each object collection as an <strong>event table</strong>:</p><ul><li>one row per <code>event_id</code></li><li>many columns are lists (one entry per particle/hit/cell in that event)</li></ul><p>The <code>colliderml.polars</code> helpers “explode” these list columns into a flat, object-as-row table.</p><h2 id="recommended-pattern" tabindex="-1">Recommended pattern <a class="header-anchor" href="#recommended-pattern" aria-label="Permalink to &quot;Recommended pattern&quot;">​</a></h2><p>Filter to the event(s) you care about <strong>before</strong> exploding:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> polars </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pl</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> colliderml.polars </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> explode_particles</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">evt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frames[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;particles&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].filter(pl.col(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;event_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event_id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">particles_flat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> explode_particles(evt)</span></span></code></pre></div><h2 id="particles" tabindex="-1">Particles <a class="header-anchor" href="#particles" aria-label="Permalink to &quot;Particles&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> colliderml.polars </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> explode_particles</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">particles_flat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> explode_particles(frames[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;particles&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><p>Output includes:</p><ul><li><code>event_id</code></li><li><code>particle_index</code> (per-event row index)</li><li>particle columns (scalar per row, previously list elements)</li></ul><h2 id="tracker-hits" tabindex="-1">Tracker hits <a class="header-anchor" href="#tracker-hits" aria-label="Permalink to &quot;Tracker hits&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> colliderml.polars </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> explode_tracker_hits</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hits_flat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> explode_tracker_hits(frames[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tracker_hits&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><h2 id="calorimeter-hits-cells-contributions" tabindex="-1">Calorimeter hits (cells + contributions) <a class="header-anchor" href="#calorimeter-hits-cells-contributions" aria-label="Permalink to &quot;Calorimeter hits (cells + contributions)&quot;">​</a></h2><p>Calorimeter hits have nested contribution structure. Use:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> colliderml.polars </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> explode_calo_cells_and_contribs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cells, contribs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> explode_calo_cells_and_contribs(frames[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;calo_hits&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><ul><li><code>cells</code>: one row per calorimeter cell hit</li><li><code>contribs</code>: one row per contribution (cell position repeated per contrib)</li></ul>`,17)]))}const E=i(l,[["render",n]]);export{c as __pageData,E as default};
