import{_ as i,c as a,S as e,o as t}from"./chunks/framework.BKWZoghX.js";const c=JSON.parse('{"title":"Loading: Config-driven Local Parquet","description":"","frontmatter":{},"headers":[],"relativePath":"library/loading.md","filePath":"library/loading.md","lastUpdated":1766143714000}'),l={name:"library/loading.md"};function n(o,s,h,p,d,r){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="loading-config-driven-local-parquet" tabindex="-1">Loading: Config-driven Local Parquet <a class="header-anchor" href="#loading-config-driven-local-parquet" aria-label="Permalink to &quot;Loading: Config-driven Local Parquet&quot;">​</a></h1><p>The ColliderML loader reads <strong>local Parquet shards</strong> (downloaded via the CLI) using Polars.</p><h2 id="load-tables" tabindex="-1">Load tables <a class="header-anchor" href="#load-tables" aria-label="Permalink to &quot;Load tables&quot;">​</a></h2><p>Use <code>colliderml.core.load_tables</code> to read a set of object tables from the local cache.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> colliderml.core </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> load_tables, collect_tables</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cfg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;dataset_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CERN/ColliderML-Release-1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;channels&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ttbar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;pileup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pu0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;objects&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;particles&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tracker_hits&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;calo_hits&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tracks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;split&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;train&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;lazy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;max_events&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> load_tables(cfg)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># dict[str, pl.DataFrame | pl.LazyFrame]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">frames </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> collect_tables(tables)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># dict[str, pl.DataFrame]</span></span></code></pre></div><h2 id="key-config-fields" tabindex="-1">Key config fields <a class="header-anchor" href="#key-config-fields" aria-label="Permalink to &quot;Key config fields&quot;">​</a></h2><ul><li><code>channels</code>: string or list (or <code>&quot;all&quot;</code>)</li><li><code>pileup</code>: <code>&quot;pu0&quot;</code>, <code>&quot;pu200&quot;</code>, etc.</li><li><code>objects</code>: <code>[&quot;particles&quot;, &quot;tracker_hits&quot;, &quot;calo_hits&quot;, &quot;tracks&quot;]</code></li><li><code>split</code>: typically <code>&quot;train&quot;</code></li><li><code>lazy</code>: <code>True</code> to <code>scan_parquet</code>, <code>False</code> to <code>read_parquet</code></li><li><code>max_events</code>: exact event limit enforced locally across all tables</li><li><code>data_dir</code>: optional override for cache directory (otherwise uses defaults / env var)</li></ul><h2 id="event-selection-max-events" tabindex="-1">Event selection (<code>max_events</code>) <a class="header-anchor" href="#event-selection-max-events" aria-label="Permalink to &quot;Event selection (\`max_events\`)&quot;">​</a></h2><p>The loader enforces a consistent event selection across objects:</p><ul><li>Select <code>event_id</code>s from a reference table (by default <code>particles</code>)</li><li>Filter all other tables to those <code>event_id</code>s</li></ul><p>This means you can download full shards but still work with a deterministic, small event slice.</p>`,11)]))}const E=i(l,[["render",n]]);export{c as __pageData,E as default};
